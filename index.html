<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!--
	<title>스마트폰 자이로 센서를 이용한 디바이스 컨트롤 </title>
	-->
	<style type="text/css">
		h1 {
			text-align: center;
		}
		
		preserve-3d {
  align: center;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
}

body {
  align: center;
    padding: 0;
    margin: 0;
    border: 0;
    overflow-x: none;
    background-color: #ffffff;
    font-family: Roboto Condensed, sans-serif;
    font-size: 20px;
    font-smooth: always;
    -webkit-font-smoothing: antialiased;
}

.back {
  align: center;
    width: 15%;
    height: 80px;
    float: left;
    background-color: #ffffff;
    border: 0px;
    border-color: #ffffff;
    border-style: solid;
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    counter-increment: bc;
    padding: 0px 5px 5px 5px;
}

.button_base {
  align: center;
    margin: 0;
    border: 0;
    font-size: 18px;
    position: relative;
    top: 50%;
    left: 50%;
    margin-top: -25px;
    margin-left: -100px;
    width: 200px;
    height: 50px;
    text-align: center;
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-user-select: none;
    cursor: default;
}

.button_base:hover {
    cursor: pointer;
}

/* ### ### ### 05 */
.btn1 {
    perspective: 500px;
    -webkit-perspective: 500px;
    -moz-perspective: 500px;
}

.btn1 div {
    position: absolute;
    text-align: center;
    width: 100%;
    height: 50px;
    padding: 10px;
    border: #000000 solid 1px;
    pointer-events: none;
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
	aling:center;
}

.btn1 div:nth-child(1) {
    color: #000000;
    background-color: #000000;
    transform: rotateX(90deg);
    -webkit-transform: rotateX(90deg);
    -moz-transform: rotateX(90deg);
    transition: all 0.2s ease;
    -webkit-transition: all 0.2s ease;
    -moz-transition: all 0.2s ease;
    transform-origin: 50% 50% -25px;
    -webkit-transform-origin: 50% 50% -25px;
    -moz-transform-origin: 50% 50% -25px;
}

.btn1 div:nth-child(2) {
    color: #000000;
    background-color: #ffffff;
    transform: rotateX(0deg);
    -webkit-transform: rotateX(0deg);
    -moz-transform: rotateX(0deg);
    transition: all 0.2s ease;
    -webkit-transition: all 0.2s ease;
    -moz-transition: all 0.2s ease;
    transform-origin: 50% 50% -25px;
    -webkit-transform-origin: 50% 50% -25px;
    -moz-transform-origin: 50% 50% -25px;
}

.btn1:hover div:nth-child(1) {
    color: #ffffff;
    transition: all 0.2s ease;
    -webkit-transition: all 0.2s ease;
    -moz-transition: all 0.2s ease;
    transform: rotateX(0deg);
    -webkit-transform: rotateX(0deg);
    -moz-transform: rotateX(0deg);
}

.btn1:hover div:nth-child(2) {
    background-color: #000000;
    transition: all 0.2s ease;
    -webkit-transition: all 0.2s ease;
    -moz-transition: all 0.2s ease;
    transform: rotateX(-90deg);
    -webkit-transform: rotateX(-90deg);
    -moz-transform: rotateX(-90deg);
}
		
		
		
		
		
		.data {
			width: 90%; 
			margin: 10px auto; 
			background: red; 
			padding: 8px;
			border-radius: 8px;
			opacity: 0;
		}

		
		
		#dataContainerMotion {
			font-size: 1.5em;
			opacity: 0;
		}

		#garden{
			position: relative;
			width: 300px;
			height: 300px;
			margin: 0 auto;
			border: 1px solid #ccc;
		}


		.ball {
			position: absolute;
			top: 100px;
			left: 100px;
			width: 100px;
			height: 100px;
			border-radius: 0%;
			background-image: url(tap.svg);
    		background-size: cover;
			text-align: center;
			line-height: 100px;
			color: white;
		}
		
		
		

	</style>
</head>
<body onload="init()">
	<audio id="audio1">
		<source src="joe.mp3" type="audio/mp3">
	  Your browser does not support the audio element.
	  </audio>


	
<!--
	<h1>스마트폰 자이로 센서의 활용</h1>
-->

	<div id="dataContainerOrientation" class="data"></div>
	<div id="dataContainerMotion" class="data"></div>
<div class="back">
    <div class="button_base btn1">
        <div>움직이기</div>
        <div>운동으로</div>
    </div>
</div>
	<!-- ball -->
	<div id="garden">
		<div id="ball" class="ball"></div>
	</div>
	<a href="firework/firework.html"><button class="btn-2"
		type="button" onclick="pause1()" id="btn" style="display: none;">마지막 페이지</button>
	<script>
		var btn=document.getElementById("btn");
		setTimeout(function() {
  		btn.style.display='block';
		}, 10000);
	</script>
	</a>

	<script type="text/javascript">


		function init(){
			//Find out Div Element
			var dataContainerOrientation = document.getElementById('dataContainerOrientation');
			var dataContainerMotion = document.getElementById('dataContainerMotion');
			var ball = document.getElementById("ball");
			var garden = document.getElementById("garden");
			var supportsVibrate = "vibrate" in navigator;
			var maxX = garden.clientWidth * 2 - ball.clientWidth;
			var maxY = garden.clientHeight * 2- ball.clientHeight;
			//alert(maxY);


			//가속도계가 기기의 방향의 변화를 감지 했을때
			if(window.DeviceOrientationEvent){
				//이벤트 리스너 등록
				window.addEventListener('deviceorientation', function(event) {
					var absolute = event.absolute;
					var alpha = event.alpha;
					var beta = event.beta; //(-180, 180)
					var gamma = event.gamma; //(-90, 90)
					console.log(gamma);
					var html =  "absolute: " +absolute+ "<br>alpha: " +alpha+ "<br>bata: " +beta+ "<br>gamma: "+ gamma; 
					dataContainerOrientation.innerHTML = html;	


					//볼을 움직이자.
					if(beta > 90) {beta = 90};
					if(beta < -90) {beta = -90};
					beta +90;
					gamma +90;

					ball.style.top = (maxX*beta/180 + 100) + "px";
					ball.style.left = (maxY*gamma/180 + 100) + "px";
					
				}, false);
			}

			//가속도에 변화가 발생 할때 
			if(window.DeviceMotionEvent){
				window.addEventListener('devicemotion', function(event){
					var x = event.accelerationIncludingGravity.x;
					var y = event.accelerationIncludingGravity.y;
					var z = event.accelerationIncludingGravity.z;
					//var r = event.accelerationIncludingGravity.r;
                  
				


					var html = "x: " +x+ "<br>y: "+y+ "<br>z: " +z;
					dataContainerMotion.innerHTML = html;

					if(y > 5){
						var a=400;
						
				play1();
				startVibrate(a);


			}

				}, true);
			}

		

		}
		function play1() {
    // 기다렸다가 시작 (밀리초)
    setTimeout(function(){
        document.getElementById("audio1").play();
		navigator.vibrate([500,10,500,10]);
        console.log('your audio is started just now');
      }, 10)
}
function startVibrate(a) {
	navigator.vibrate();
		
}
	</script>

</body>
</html>
